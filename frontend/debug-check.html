<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNDæ¨¡å—çŠ¶æ€æ£€æŸ¥</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            line-height: 1.6;
        }
        .status-item {
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .success { border-color: #4CAF50; background-color: #f1f8e9; }
        .error { border-color: #f44336; background-color: #ffebee; }
        .loading { border-color: #2196F3; background-color: #e3f2fd; }
    </style>
</head>
<body>
    <h1>DNDæ¨¡å—æ‹†åˆ†åçŠ¶æ€æ£€æŸ¥</h1>
    <div id="status-container">
        <div class="status-item loading">æ­£åœ¨æ£€æŸ¥æ¨¡å—å¯¼å…¥çŠ¶æ€...</div>
    </div>

    <script type="module">
        const statusContainer = document.getElementById('status-container');
        
        function addStatus(message, type = 'loading') {
            const div = document.createElement('div');
            div.className = `status-item ${type}`;
            div.textContent = message;
            statusContainer.appendChild(div);
        }

        async function checkModules() {
            statusContainer.innerHTML = '';
            
            try {
                // æ£€æŸ¥ä¸»æ¨¡å—å¯¼å…¥
                addStatus('æ­£åœ¨æ£€æŸ¥ä¸»æ¨¡å—å¯¼å…¥...', 'loading');
                const mainModule = await import('./src/utils/dnd/index.js');
                addStatus('âœ… ä¸»æ¨¡å—å¯¼å…¥æˆåŠŸ', 'success');
                
                // æ£€æŸ¥å¯¼å‡ºçš„ç»„ä»¶
                const exports = Object.keys(mainModule);
                addStatus(`å¯¼å‡ºçš„ç»„ä»¶: ${exports.join(', ')}`, 'success');
                
                // æ£€æŸ¥å…³é”®ç»„ä»¶
                const requiredExports = ['NotesDragContext', 'FilesDragContext', 'createSortableItem'];
                for (const exportName of requiredExports) {
                    if (mainModule[exportName]) {
                        addStatus(`âœ… ${exportName} å¯¼å‡ºæ­£å¸¸`, 'success');
                    } else {
                        addStatus(`âŒ ${exportName} å¯¼å‡ºç¼ºå¤±`, 'error');
                    }
                }
                
                // æ£€æŸ¥å­æ¨¡å—
                const subModules = [
                    './src/utils/dnd/dnd-logger.js',
                    './src/utils/dnd/dnd-sortable.jsx',
                    './src/utils/dnd/dnd-note-context.jsx',
                    './src/utils/dnd/dnd-file-context.jsx',
                    './src/utils/dnd/dnd-helpers.js'
                ];
                
                for (const module of subModules) {
                    try {
                        await import(module);
                        addStatus(`âœ… ${module} åŠ è½½æˆåŠŸ`, 'success');
                    } catch (error) {
                        addStatus(`âŒ ${module} åŠ è½½å¤±è´¥: ${error.message}`, 'error');
                    }
                }
                
                addStatus('ğŸ‰ æ‰€æœ‰æ¨¡å—æ£€æŸ¥å®Œæˆï¼', 'success');
                
            } catch (error) {
                addStatus(`âŒ ä¸»æ¨¡å—å¯¼å…¥å¤±è´¥: ${error.message}`, 'error');
                console.error('æ¨¡å—å¯¼å…¥é”™è¯¯:', error);
            }
        }

        // å¼€å§‹æ£€æŸ¥
        checkModules();
    </script>
</body>
</html>
